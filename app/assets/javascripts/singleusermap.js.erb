var map; 

function initMap() {
   var mapOptions = {
   center: new google.maps.LatLng(40.7736154, -73.9711057),
   zoom:12,
   mapTypeId: google.maps.MapTypeId.ROADMAP
   };

 map = new google.maps.Map($("#map-canvas")[0], mapOptions);
 }

function addMarker(latitude, longitude, title) {
  var marker = new google.maps.Marker({
    position:new google.maps.LatLng(latitude, longitude), 
    map : map, 
    icon: '/assets/mentormarker.png',
    draggable:true,
    animation: google.maps.Animation.DROP,
    title : title
  });
}

function addLearnerMarker(latitude, longitude, title) {
  var marker = new google.maps.Marker({
    position:new google.maps.LatLng(latitude, longitude), 
    map : map, 
    icon: '/assets/learnermarker.png',
    draggable:true,
    animation: google.maps.Animation.DROP,
    title : title
  });
}



function showMap(lat, lng) {

var nyc = new google.maps.LatLng(40.7143528, -74.00597309999999);
var userlocation = new google.maps.LatLng(lat, lng);
var marker;
var map;

function initialize() {
  var mapOptions = {
    zoom: 12,
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    center: new google.maps.LatLng(lat, lng)
  };

  map = new google.maps.Map(document.getElementById('map-canvas'),
          mapOptions);

  marker = new google.maps.Marker({
    map:map,
    draggable:true,
    animation: google.maps.Animation.DROP,
    position: userlocation
  });
  google.maps.event.addListener(marker, 'click', toggleBounce);
}

var latlng = [];
// function addMarker(latitude, longitude, title, whatami) {
function addMarker(latitude, longitude, title, whatami) {
    var markerLatlng = new google.maps.LatLng(latitude, longitude);
    var markerSettings={
        position: markerLatlng,
        map: map,   
        title: title
      }
    //this way we still use the default marker when there is none set
    // switch (whatami) {
    //     case 'park':
    //     markerSettings.icon = '/assets/parkmarker.png';
    //     break;

    //     case 'rest':
    //     markerSettings.icon = '/assets/restaurantmarker.png';
    //     break;

    //     case 'meetup':
    //     markerSettings.icon = '/assets/meetupmarker.png';
    //     break;
    //   }

  var marker = new google.maps.Marker(markerSettings);
  markers.push(marker);
  latlng.push(markerLatlng);
};

function toggleBounce() {

  if (marker.getAnimation() != null) {
    marker.setAnimation(null);
  } else {
    marker.setAnimation(google.maps.Animation.BOUNCE);
  }
}

google.maps.event.addDomListener(window, 'load', initialize);
};